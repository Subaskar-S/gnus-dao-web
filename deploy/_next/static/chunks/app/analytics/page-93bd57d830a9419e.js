(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4109],{9784:function(e,s,t){Promise.resolve().then(t.bind(t,17652))},31047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},41671:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},70525:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},95805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},38060:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]])},17652:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(57437),l=t(2265),r=t(79205);let n=(0,r.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var i=t(31047),d=t(41671);let c=(0,r.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var o=t(70525),m=t(95805),x=t(38060),u=t(23645),h=t(32853),p=t(3263);function j(){let{gnusDaoInitialized:e}=(0,h.v)(),[s,t]=(0,l.useState)(null),[r,j]=(0,l.useState)([]),[f,N]=(0,l.useState)([]),[g,v]=(0,l.useState)(!0),[b,y]=(0,l.useState)("30d");(0,l.useEffect)(()=>{w()},[e,b]);let w=async()=>{try{if(v(!0),!e){t({totalProposals:0,activeProposals:0,executedProposals:0,totalVotes:0,uniqueVoters:0,averageParticipation:0,quorumRate:0,passRate:0}),j([]),N([]),v(!1);return}let s=await p.u.getProposalCount(),a=0,l=0,r=0;for(let e=1n;e<=s;e++)try{let[s,t]=await Promise.all([p.u.getProposal(e),p.u.getProposalState(e)]);s&&(1===t&&a++,7===t&&l++,r+=Number(s.forVotes+s.againstVotes+s.abstainVotes))}catch(s){console.error("Error loading proposal ".concat(e,":"),s)}let n={totalProposals:Number(s),activeProposals:a,executedProposals:l,totalVotes:r,uniqueVoters:Math.floor(.3*r),averageParticipation:s>0?r/Number(s)*.1:0,quorumRate:s>0?l/Number(s)*100:0,passRate:s>0?l/Number(s)*100:0};t(n),j([]),N([]),v(!1)}catch(e){console.error("Error loading analytics data:",e),v(!1)}},k=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4)),P=e=>"".concat(e.toFixed(1),"%");return(0,a.jsx)(u.a1,{requireAuth:!1,children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Governance Analytics"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Insights into GNUS DAO governance participation and trends"})]}),(0,a.jsx)("div",{className:"flex gap-2 mt-4 sm:mt-0",children:(0,a.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,a.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,a.jsx)("option",{value:"all",children:"All time"})]})})]}),g?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading analytics..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-card border rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 text-blue-500"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Proposals"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(null==s?void 0:s.totalProposals)||0}),(0,a.jsxs)("p",{className:"text-sm text-green-600",children:[(null==s?void 0:s.activeProposals)||0," active"]})]})]})}),(0,a.jsx)("div",{className:"bg-card border rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 text-green-500"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Votes"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(null==s?void 0:s.totalVotes)||0}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(null==s?void 0:s.uniqueVoters)||0," unique voters"]})]})]})}),(0,a.jsx)("div",{className:"bg-card border rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c,{className:"h-8 w-8 text-purple-500"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Participation"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:P((null==s?void 0:s.averageParticipation)||0)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average rate"})]})]})}),(0,a.jsx)("div",{className:"bg-card border rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-orange-500"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Pass Rate"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:P((null==s?void 0:s.passRate)||0)}),(0,a.jsxs)("p",{className:"text-sm text-green-600",children:[(null==s?void 0:s.executedProposals)||0," executed"]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(n,{className:"h-5 w-5 mr-2"}),"Governance Health"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Quorum Rate"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:P((null==s?void 0:s.quorumRate)||0)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat((null==s?void 0:s.quorumRate)||0,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Participation Rate"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:P((null==s?void 0:s.averageParticipation)||0)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat((null==s?void 0:s.averageParticipation)||0,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Success Rate"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:P((null==s?void 0:s.passRate)||0)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat((null==s?void 0:s.passRate)||0,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"Voting Trends"]}),(0,a.jsx)("div",{className:"space-y-3",children:r.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:new Date(e.date).toLocaleDateString()}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.proposals," proposals"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[e.votes," votes"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:P(e.participation)})]})]},s))})]})]}),(0,a.jsxs)("div",{className:"bg-card border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Top Voters"]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rank"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Address"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Votes Cast"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Participation"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Vote"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:f.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"h-6 w-6 rounded-full flex items-center justify-center text-xs font-bold text-white ".concat(0===s?"bg-yellow-500":1===s?"bg-gray-400":2===s?"bg-orange-600":"bg-blue-500"),children:s+1})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium font-mono",children:k(e.address)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium",children:e.votesCount})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium",children:P(e.participationRate)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(e.lastVote).toLocaleDateString()})})]},e.address))})]})})]}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Proposal Categories"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Treasury Management"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"45%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Protocol Upgrades"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"30%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Governance Changes"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"15%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Community Initiatives"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"10%"})]})]})]}),(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Voting Patterns"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Average voting time"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"2.3 days"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Early voters (<24h)"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"34%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Last-minute voters"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"18%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Delegation rate"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"23%"})]})]})]})]})]})]})})}}},function(e){e.O(0,[6178,2957,2423,3828,2330,2971,2117,1744],function(){return e(e.s=9784)}),_N_E=e.O()}]);